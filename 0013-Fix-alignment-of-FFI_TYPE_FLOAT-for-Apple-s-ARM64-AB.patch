From aebf2c3023b5ff056a708dc34169f7b549b2ec4f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ole=20Andr=C3=A9=20Vadla=20Ravn=C3=A5s?=
 <ole.andre.ravnas@tillitech.com>
Date: Fri, 25 Jul 2014 21:40:50 +0200
Subject: [PATCH 013/415] Fix alignment of FFI_TYPE_FLOAT for Apple's ARM64 ABI

---
 src/aarch64/ffi.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/aarch64/ffi.c b/src/aarch64/ffi.c
index b807a2d..10e95db 100644
--- a/src/aarch64/ffi.c
+++ b/src/aarch64/ffi.c
@@ -146,6 +146,9 @@ get_basic_type_alignment (unsigned short type)
   switch (type)
     {
     case FFI_TYPE_FLOAT:
+#if defined (__APPLE__)
+      return sizeof (UINT32);
+#endif
     case FFI_TYPE_DOUBLE:
       return sizeof (UINT64);
 #if FFI_TYPE_DOUBLE != FFI_TYPE_LONGDOUBLE
-- 
2.7.4.huawei.3

